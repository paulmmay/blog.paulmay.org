<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>SK My First Daemon</title>
    <link href='http://fonts.googleapis.com/css?family=News+Cycle|Abel' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/application.css"/>
</head>
<body>
    <div id="wrapper">
        <div id="navigation">
          <header>
            <a href="/">Steven Klise</a>
          </header>

          <ul>
            <li><a href="http://stevenklise.tumblr.com">Tumblr</a></li>
            <li><a href="http://twitter.com/stevenklise">@stevenklise</a></li>
          </ul>
        </div>
        <div id="content">
        <article class="post">
    <hgroup>
        <h1>My First Daemon</h1>
        <h5>Sunday, October 02, 2011</h5>
    </hgroup>
    <div class="article-body">
        <p><strong>Playing a multiplayer game through Telnet with Sinatra &amp; a daemon.</strong></p>

<p>For our first 'make something' assignment in <a href="/Understanding-Networks">Understanding Networks</a> we were tasked with creating a client for a Telnet server to play a game <a href="https://github.com/tigoe/MakingThingsTalk2/tree/master/chapter2/project2/MonskiPong">similar to pong</a>.</p>

<p>The class is taught in PHP, a fact which has convinced me to do (and someday document how to do) everything in Ruby. Of course Telnet is a persistent connection and HTTP is stateless. Trying to maintain a Telnet connection strictly through a browser is then not possible without diving into the world of sockets and streaming.</p>

<script src="https://gist.github.com/1257779.js?file=daemon.rb"></script>


<p>To maintain the browser as the interface but not have <code>telnet</code> happening in the HTTP requests I wrote, with the help of resident Greg Borenstein, a daemon. A <a href="http://en.wikipedia.org/wiki/Daemon_(computing">daemon</a>) is a script that runs in the background, constantly. In my case the daemon listens to the database for a new Task. When it finds a new Task it sends the contents of the Task to the Telnet connection and then marks the Task as completed.</p>

<p>The Task is a DataMapper object.</p>

<script src="https://gist.github.com/1257779.js?file=Task.rb"></script>


<p>The user clicks an arrow or connection button in the browser and a Task object is created with that command and designated as not being done. In the end this worked well, however the latency between browser to database to daemon to telnet server was only manageable running the app locally.</p>

<p><a href="https://github.com/stevenklise/BallDropClient">Source on Github</a></p>

    </div>
    <footer>
        <h3>Related Posts</h3>
        <ul class="listed">
        
              <li><span>25 Feb 2012</span> &raquo; <a href="/2012/02/25/chillin">Chillin' In Space</a></li>
        
              <li><span>10 Feb 2012</span> &raquo; <a href="/2012/02/10/facedom">Putting Your Face in a Webpage with Node.js & FaceOSC</a></li>
        
              <li><span>30 Jan 2012</span> &raquo; <a href="/2012/01/30/Memory">On Being Memorious</a></li>
        
        </ul>

        
            <a href="/categories/Understanding-Networks">Understanding-Networks</a> 
        
    </footer>
</article>
        </div>
        
        <div id="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'sklise'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
        

        

        <footer>
          <section class="first">
            <h4>About</h4>
            <img src="http://sklise.s3.amazonaws.com/sk.jpg" /><p>An avid fan of Law & Order, Steve Klise is a graduate student at ITP. He makes tools, toys & art with Ruby, Javascript, Arduino, ink & cameras.</p>
          </section>

          <section>
              <h4>Categories</h4>
              <ul>
                  
                
                  <li><a href="/categories/ITP-First-Semester">ITP-First-Semester</a></li>
                
                  <li><a href="/categories/Reading-Writing-Electronic-Text">Reading-Writing-Electronic-Text</a></li>
                
                  <li><a href="/categories/Nature-Of-Code">Nature-Of-Code</a></li>
                
                  <li><a href="/categories/Understanding-Networks">Understanding-Networks</a></li>
                
                  <li><a href="/categories/Musical-Sequence">Musical-Sequence</a></li>
                
                  <li><a href="/categories/ITP">ITP</a></li>
                
                  <li><a href="/categories/PixelsToPolygons">PixelsToPolygons</a></li>
                
                  <li><a href="/categories/AppropriatingNewTechnologies">AppropriatingNewTechnologies</a></li>
                
              </ul>
          </section>

          <section class="last">
            <h4>Elsewhere</h4>
              <ul>
                <li><a href="http://twitter.com/stevenklise">Twitter</a></li>
                <li><a href="http://github.com/stevenklise">Github</a></li>
                <li><a href="http://stevenklise.tumblr.com">Tumblr</a></li>
                <li><a href="https://pinboard.in/u:sklise">Pinboard</a></li>
                <li><a href="http://vimeo.com/stevenklise">Vimeo</a></li>
              </ul>

            <h4>Etc.</h4>
              <ul>
                <li id="mt"></li>
                <li><a href="http://feeds.feedburner.com/StevenKlise">RSS</a></li>
              </ul>
          </section>
        </footer>
    </div>
    <script>
      parts = ['steven','mail','klise','com'];
      mt = document.getElementById('mt');
      mt.innerHTML = "<a href='" + parts[1] + "to:" + parts[0] + "@" + parts[0] + parts[2] + "." + parts[3] + "'>Email</a>";
    </script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-6955602-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>
</html>